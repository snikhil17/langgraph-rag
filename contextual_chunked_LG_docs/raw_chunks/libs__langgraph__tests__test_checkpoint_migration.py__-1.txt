import operator
import sys
import time
from collections import defaultdict
from typing import Annotated, Literal, Optional, Union

import pytest
from typing_extensions import TypedDict

from langgraph.checkpoint.base import (
    BaseCheckpointSaver,
    CheckpointTuple,
    copy_checkpoint,
)
from langgraph.graph.state import StateGraph
from langgraph.types import Command, Interrupt, PregelTask, StateSnapshot, interrupt
from langgraph.utils.config import patch_configurable
from tests.any_int import AnyInt
from tests.any_str import AnyDict, AnyObject, AnyStr
from tests.conftest import (
    REGULAR_CHECKPOINTERS_ASYNC,
    REGULAR_CHECKPOINTERS_SYNC,
    awith_checkpointer,
)